<!-- これは投稿一覧画面 -->



<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0">
	<title>BOOKS</title>
</head>

<body>

	<!-- book投稿一覧 -->
	<h1>Books</h1>
	<table class="table table-condensed">
		<tr>
			<th>Title</th>
			<th>Option</th>
			<th colspan="3"></th>
		</tr>
		<tbody>
				<!-- books変数内から一つずつ取り出しbook変数へ -->
				<% @books.each do |book| %>
				<!-- bookとひもついているユーザーの画像データを表示させる -->
				<td>
					<%= attachment_image_tag book.user, :profile_image, :fill, 100, 100, format: 'jpeg', class: "img-circle pull-left profile-img", fallback: "no_image.jpg" %>
				</td>
				<!-- タイトルにリンク付けする -->
				<td>
					<%= link_to book_path(book.id) do %>
					<%= book.title %>
				</td>
					<% end %>
				<!-- bodyを表示 -->
				<td>
					<%= book.body %>
				</td>
				<% end %>
			</table>
			</td>
		</tbody>
	</table>
	<!-- book投稿一覧ここまで -->



	<footer>
		<!-- エラーメッセージ -->
		<ul>
			<% @book.errors.full_messages.each do |msg| %>
			<li>
				<%= msg %>
			</li>
			<% end %>
		</ul>
		<!-- エラーメッセージここまで -->

		<!-- 新規投稿画面 -->
		<h2>New book</h2>
		<!-- form_for部分 -->

		<%= form_for(@book, url: '/books') do |f| %>

		<label>Title</label>
		<%= f.text_field :title %>
		<label>Option</label>
		<%= f.text_area :body %>

		<%= f.submit 'Create Book' %>
		<% end %>

	</footer>

</body>
</html>